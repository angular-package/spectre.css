// Variables.
@use '../../variables/core' as *;

// Functions.
@use '../../functions/class/active-class.function' as *;
@use '../../functions/class/class.function' as *;
@use '../../functions/var/get-var.function' as *;
@use '../../functions/var/unit-var.function' as *;
@use '../functions/step-class.function' as *;

// Mixins.
@use '../../borders/mixins/border.mixin' as *;
@use '../../mixins/color/background.mixin' as *;
@use '../../mixins/color/color.mixin' as *;
@use '../../mixins/margin.mixins' as *;
@use '../../mixins/z-index.mixin' as *;

// The `step()` mixin.
@mixin step($class: '', $selector: (), $dictionary: ()) {
  #{step-class($class, $selector, $dictionary)} {
    // Display.
    display: flex;
    flex-wrap: nowrap;
    width: 100%;
    @include margin(('unit', '1'), ('unit', '0'));

    list-style: none;

    // .step-item {
    // #{class(($step-name, 'item'))} {
    #{step-class(($class, 'item'), (), $dictionary)} {
      position: relative;
      flex: 1 1 0;
      min-height: 1rem;
      margin-top: 0;
      text-align: center;

      &:not(:first-child)::before {
        content: '';
        position: absolute;
        top: 9px;
        left: -50%;
        width: 100%;
        height: 2px;

        @include background('primary');
      }

      a {
        display: inline-block;
        padding: 20px 10px 0;
        @include color('primary');

        text-decoration: none;

        &::before {
          content: '';
          position: absolute;
          top: unit-var('1');
          left: 50%;
          @include z-index('0');

          display: block;
          width: unit-var('3');
          height: unit-var('3');

          // Border.
          @include border('lg', solid, 'light');

          border-radius: 50%;

          @include background('primary');

          transform: translateX(-50%);
        }
      }

      // &.active {
      #{active-class('&')} {
        a {
          &::before {
            @include border('lg', solid, 'primary');
            @include background('light');
          }
        }

        // & ~ .step-item {
        // & ~ #{class(($step-name, 'item'))} {
        & ~ #{step-class(($class, 'item'), (), $dictionary)} {
          &::before {
            @include background('border');
          }

          a {
            @include color('gray');

            &::before {
              @include background('border');
            }
          }
        }
      }
    }
  }
}
