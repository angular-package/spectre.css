// Sass.
// @use 'sass:list';

// Modules.
@use 'list';

// Functions.
// @use 'list/index/list-type-index.function' as *;
// @use 'list/list-replace-string.function' as *;

// Status: DONE
// The `replace-parent-placeholder()` function.
@function replace-parent-placeholder($selector, $placeholder: __PARENT__) {
  @if type-of($selector) == list and list.length($selector) > 0 {
    // If first element of the list is string type.
    @if list.type-index($selector, 1) == string {
      $selector: list.replace-string($selector, $placeholder, '&');

    // If first element of the list is list type.
    } @else {
      $i: 1;
      @each $value in $selector {
        @if type-of($value) == list and list.length($value) > 0 {
          $selector: list.set-nth($selector, $i, list.replace-string($value, $placeholder, '&'));
        }

        $i: $i + 1;
      }
    }
  }
  @return $selector;
}

// Examples.
// @debug replace-parent-placeholder(('__PARENT__', 'card')); // "&", "card"
// @debug replace-parent-placeholder(('__PARENT__', 'card'), __OTHER__); // "__PARENT__", "card"
// @debug replace-parent-placeholder(('__OTHER__', 'card'), __OTHER__); // "&", "card"
// @debug replace-parent-placeholder((('__PARENT__', 'bla'), 'card')); // ("&", "bla"), "card"
// @debug replace-parent-placeholder(('__PARENT__' 'bla', __PARENT__ 'card')); // ("&", "bla"), (&, "card")
